# ほこたんの回し車ダッシュ 仕様書

## 1. 概要

### タイトル
ほこたんの回し車ダッシュ

### コンセプト
可愛いハムスター「ほこたん」が回し車で全力ダッシュするカジュアルゲーム。  
画面をタップ（またはクリック）するタイミングでスピードを上げてスコアを稼ぐ。  
回しすぎると「オーバーヒート」してほこたんが目を回してゲームオーバーになる、シンプルで分かりやすいゲーム。

### 対象プラットフォーム
- スマホブラウザ（iOS / Android のモバイルブラウザ）
- PCブラウザも一応対応（レスポンシブ）

### 技術スタック
- HTML / CSS / JavaScript（純粋なフロントエンドのみ）
- ライブラリ不使用（バニラJS）
- ビルドツール不要（そのまま Vercel にデプロイできる構成）

---

## 2. ゲーム仕様

### 2.1 基本ルール

1. 画面中央付近に「回し車」と中に乗った「ほこたん」が表示される。
2. 画面下部に「タップゾーン」もしくは「TAP!」ボタンを表示。
3. 一定のテンポで「ベストタイミングゾーン」が表示され、そのタイミングでタップすると回転スピードがアップ。
4. 回転スピードが上がるとスコアがどんどん加算される。
5. スピードが高いほどスコアの増加量が増える。
6. ただしスピードが高すぎる状態が一定時間続くと「オーバーヒートゲージ」が溜まり、MAXになるとゲームオーバー。
7. ゲームオーバー時にスコア表示・ハイスコア更新演出。
8. ハイスコアは `localStorage` に保存。

### 2.2 パラメータ（目安）

- 内部的に「speed（スピード）」を数値で管理。
- スピード最小値: 0
- スピード最大値: 100（オーバーヒート手前）
- 初期スピード: 10

#### タップ判定
- ベストタイミングゾーンは、一定周期で ON になるフラグ `isGoodTiming` で管理。
- `isGoodTiming === true` のときにタップ → speed + 10
- それ以外でタップ → speed + 3（微増） or ペナルティで -5 など、バランスは適度に調整。

#### スピードの自然減衰
- 毎フレーム（または一定間隔）で speed を少しずつ減らす（例: 0.1〜0.2ずつ減少）。
- 0未満にならないようにクリップ。

#### オーバーヒート
- `speed` が 80 以上の状態が続くと「オーバーヒートゲージ（0〜100）」が増加。
- 80 未満に落ちたらゲージは少しずつ減少。
- オーバーヒートゲージが 100 になったらゲームオーバー。

#### スコア
- ゲーム中、一定間隔（例: 100msごと）で  
  `score += floor(speed / 5)` のように加算。
- スピードが高いほどスコアが伸びる仕組み。

---

## 3. 画面構成（UI仕様）

### 3.1 メイン画面（ゲーム画面）

縦レイアウト（スマホ縦持ち前提）：

1. **上部**
   - タイトル or シンプルなテキスト  
     例：「ほこたんの回し車ダッシュ」
   - 現在スコア表示  
     例：「SCORE: 1234」
   - ハイスコア表示  
     例：「BEST: 5678」

2. **中央**
   - 回し車画像＋中にいるほこたん画像  
   - `speed` に応じて回転アニメーション速度を変化させる  
     - CSS アニメーションの `animation-duration` を動的変更
     - もしくは JS で回転角を更新してもOK
   - スピードが低いとゆっくり、高いと高速回転っぽく見せる。

3. **下部**
   - オーバーヒートゲージ（横長バー）
     - 0〜100を%で CSS 幅に反映
     - 高くなるほど色が変わっても良い（緑→黄色→赤 など）
   - 「TAP!!」ボタン or 画面全体タップ判定
     - 操作しやすさ重視で、スマホでは画面全体タップでもOK
     - PC の場合はスペースキー入力にも対応できるとより良い。

### 3.2 スタート／リザルト UI

- 画面中央にオーバーレイ表示の簡易モーダル。

#### 初回スタート時
- タイトル
- 遊び方簡易説明：
  - 「タイミングよくタップしてスピードアップ！」
  - 「回しすぎるとオーバーヒートでゲームオーバー」
- 「ゲームスタート」ボタン

#### ゲームオーバー時
- 「GAME OVER」
- 今回のスコア表示
- ハイスコア更新時は「NEW RECORD!」表示
- 「もう一度あそぶ」ボタン

---

## 4. 演出仕様

### 4.1 ほこたんの表情・状態

最低でも以下の3状態を切り替えられるようにする：

1. **通常走行**
   - ニコニコしながら走っているほこたん。

2. **高速状態**
   - ちょっと必死顔、汗が出ている、など。
   - speed が 70 以上など、ある程度の閾値で切り替え。

3. **オーバーヒート / ゲームオーバー**
   - 目をぐるぐるさせている・倒れているなど。

画像は CSSクラス切り替え or `<img>` の `src` 切り替えで実装。

---

## 5. データ保存仕様

- ブラウザの `localStorage` を使用。
- キー名例：
  - `hokotan_best_score`
- ゲーム終了時に、今回スコアと比較し、高ければ更新。
- 初回プレイ時は存在しないので 0 として扱う。

---

## 6. 画像アセット仕様

画像はユーザー（たか）が用意する想定。

### 6.1 必要な画像一覧（最小構成）

1. **ほこたん（通常）**
   - ファイル名例: `hokotan_normal.png`
   - 推奨サイズ: 正方形〜やや縦長（例: 512×512）
   - 背景透過PNG推奨

2. **ほこたん（高速状態）**
   - ファイル名例: `hokotan_fast.png`
   - 推奨サイズ: `hokotan_normal` と同じ

3. **ほこたん（オーバーヒート）**
   - ファイル名例: `hokotan_overheat.png`
   - 推奨サイズ: 同上

4. **回し車**
   - ファイル名例: `wheel.png`
   - 推奨サイズ: 512×512 or 768×768 ぐらい
   - 透過PNG（輪っかの部分だけ）

※ ほこたんは回し車の中に重ねて表示。  
※ もし「ほこたん＋回し車一体型画像」の方が作りやすければ、  
　`wheel` なしで一体型1〜3枚でもOK。

### 6.2 画像フォルダ構成

- `public/` or `assets/` 配下に配置（Vercelで配信しやすいように）
- 例：
  - `public/images/hokotan_normal.png`
  - `public/images/hokotan_fast.png`
  - `public/images/hokotan_overheat.png`
  - `public/images/wheel.png`

※ 実際のパスはプロジェクト構成に合わせること。

---

## 7. ディレクトリ構成（例）

```text
/
├─ index.html
├─ style.css
├─ main.js
└─ public/
   └─ images/
      ├─ hokotan_normal.png
      ├─ hokotan_fast.png
      ├─ hokotan_overheat.png
      └─ wheel.png
````

* `index.html` : 画面の骨組み
* `style.css`  : レイアウト・アニメーション
* `main.js`    : ゲームロジック

---

## 8. 実装タスク（Codex への指示目安）

1. **基本HTMLの作成**

   * ヘッダー（タイトル／スコア／ハイスコア）
   * 中央のゲーム領域（回し車＋ほこたん）
   * 下部のオーバーヒートゲージ
   * スタート／リザルト用モーダル

2. **CSSレイアウト**

   * 縦長画面前提のレスポンシブ
   * スマホで見やすいサイズ感
   * ボタンを大きく押しやすく

3. **ゲームループ実装**

   * `requestAnimationFrame` または `setInterval` でループ
   * speed の更新
   * スコア加算
   * オーバーヒートゲージ更新
   * ゲームオーバー判定

4. **入力処理**

   * 画面タップ（スマホ）
   * マウスクリック（PC）
   * 可能ならスペースキー入力も対応

5. **状態管理**

   * `gameState` (`"ready" | "running" | "gameover"`)
   * ゲーム開始／再スタート処理
   * モーダルの表示／非表示

6. **ハイスコア管理**

   * `localStorage` から値読み込み
   * ゲーム終了時に更新チェック
   * 画面上の表示更新

7. **演出**

   * speed に応じて回し車の回転速度を変更
   * speed / ゲージに応じてほこたん画像切り替え
   * ハイスコア更新時の簡易演出（テキストを光らせるなど）

---

## 9. デプロイ

### 想定デプロイ先

* Vercel（無料枠を利用）

### 手順（ざっくり）

1. このプロジェクトを GitHub リポジトリとして作成。
2. `index.html` がルートにある状態でコミット＆プッシュ。
3. Vercel のダッシュボードで「New Project」→ GitHub リポジトリを選択。
4. フレームワークは「Other」または自動認識でOK（ビルド不要）。
5. デプロイ完了後、発行された URL を使用。

---

## 10. 今後の拡張案（任意）

* コンボシステム（連続でベストタイミング成功するとボーナス）
* キャラクタースキン（ほこたんの帽子・服など）
* 日替わりミッション（「○○点以上取ろう」など）
* シェア用画像の簡易生成（Canvas で「SCORE: 1234」入り画像）

